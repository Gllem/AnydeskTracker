<div class="p-3 text-start">
    <h2>Игры на сегодня</h2>
    <div id="games" class="d-flex flex-wrap gap-3 mt-3"></div>
</div>

<script>
    let cardAnims = {};
    
    async function loadGames() {
        const res = await fetch("/Work/Games");
        if (!res.ok) return alert("Ошибка загрузки списка игр");
        const data = await res.json();

        const container = document.getElementById("games");
        container.innerHTML = "";

        data.forEach(game => {
            const card = document.createElement("div");
            card.className = "btn btn-light border p-3 rounded cursor-pointer text-truncate text-start";
            card.style.width = "180px";

            const gameName = game.name ? game.name : game.url;
            
            const innerHtml = `<strong>${gameName}</strong>`;
            
            card.innerHTML = innerHtml;
            container.appendChild(card);
            
            card.addEventListener("click", async () => {
                await CopyText(card,  gameName);
                SuccessAnim(card, innerHtml);
            })
        });
    }
    
    async function CopyText(card, gameName){
        await navigator.clipboard.writeText(gameName);
    }
    
    function SuccessAnim(card, endText){
        if (cardAnims[card] === true)
            return;
        cardAnims[card] = true;
        card.innerHTML = "<strong>Скопировано!</strong>";
        setTimeout(() => {
            card.innerHTML = endText;
            cardAnims[card] = false;
        }, 750);
    }
    
    loadGames();

</script>